{{ define "main" }}
<div class="stream-container">
  <div class="stream-header">
    <h2>{{ if eq .Kind "taxonomy" }}#{{ .Title }}{{ else }}{{ .Title }}{{ end }}</h2>
    <span style="color: var(--text-muted); font-size: 0.85rem;">{{ len .Pages }} {{ if eq (len .Pages) 1 }}post{{ else }}posts{{ end }}</span>
  </div>

  {{ range .Pages.ByDate.Reverse }}
  <article class="post-card" {{ with .Params.type }}data-type="{{ . | urlize }}"{{ end }}>
    <div class="post-meta">
      {{ with .Params.type }}<span class="post-type {{ . | urlize }}">{{ . }}</span>{{ end }}
      <time>{{ .Date.Format "January 2, 2006" }}</time>
    </div>
    <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
    {{ if .Params.description }}
      <p class="post-excerpt">{{ .Params.description }}</p>
    {{ else }}
      <p class="post-excerpt">{{ .Summary }}</p>
    {{ end }}
    {{ with .Params.tags }}
    <div class="post-tags">
      {{ range . }}<a href="/tags/{{ . | urlize }}/">#{{ . }}</a>{{ end }}
    </div>
    {{ end }}
  </article>
  {{ end }}

  <div style="margin-top: 2rem; text-align: center;">
    <a href="/" style="color: var(--text-muted); font-size: 0.85rem;">← Back to the stream</a>
    {{ if eq .Kind "taxonomy" }}
    · <a href="/tags/" style="color: var(--text-muted); font-size: 0.85rem;">All tags</a>
    {{ end }}
  </div>
</div>
{{ end }}
